import{t as V,d as w,a as x,m as q,r as c,j as e,S as J,n as G,p as K,q as Y,v as Q,w as X,x as Z,y as ee,I as j,z as _,A as se,C as ae,D as te,E as ne,R as re,F as oe,G as C,H as M,J as E,K as I,M as ie,s as D,g as F,o as $,O as le,P as ce,Q as de,T as ue,U as he,V as pe,W as me,X as S,Y as xe,Z as P,_ as je,$ as ge,a0 as Se,a1 as fe,a2 as N,a3 as ve,a4 as z,a5 as be,a6 as we,h as B,a7 as ye,a8 as ke,B as v,f as O,a9 as Ce,aa as Me,ab as k,ac as Ee,ad as Ie,ae as Le,af as _e,ag as Be,ah as Ne,ai as ze,aj as Te,ak as De,al as Fe,am as $e,an as Pe,ao as Oe,ap as Ae,aq as Re,k as Ue,ar as We,as as He,at as L,au as Ve,av as qe,aw as T,ax as Je,ay as Ge,u as A,az as Ke}from"./index-73ccfb9d.js";import{B as R}from"./Button-9c14b7bd.js";import{u as f,B as U,C as W}from"./ConfirmationPopup-5f88b473.js";import"./Image-5998004e.js";const Ye=Object.keys(V),Qe=({setIsOpenPopUp:t,boxRef:a,setIsLoading:s})=>{const n=w(),r=x(q);c.useEffect(()=>{const o=l=>{l.target.closest("button")!==a.current&&t(!1)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[a,t]),c.useEffect(()=>{const o=l=>{l.code==="Escape"&&t(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[t]);const i=o=>{s(!0),n(Q({theme:o})).unwrap().finally(()=>{t(!1),s(!1)})};return e.jsx(J,{children:Ye.map(o=>e.jsx(G,{children:e.jsx(K,{type:"button",onClick:()=>i(o),children:e.jsx(Y,{className:r===o&&"active",children:o})})},o))})},Xe=({setIsLoading:t})=>{const[a,s]=c.useState(!1),n=c.useRef(),r=i=>{i.target.closest("ul")||s(!a)};return e.jsxs(X,{children:[e.jsxs(Z,{type:"button",onClick:r,ref:n,children:[e.jsx(ee,{children:"Theme"}),!a&&e.jsx(j,{id:"chevron-down",size:16,pointerEvents:"none"}),a&&e.jsx(j,{id:"chevron-up",size:16,pointerEvents:"none"})]}),a&&e.jsx(Qe,{boxRef:n,setIsOpenPopUp:s,setIsLoading:t})]})},Ze=t=>new Promise(a=>{re.imageFileResizer(t,150,150,"JPEG",100,0,s=>{a(s)},"file")}),es=({setAvatar:t})=>{const{avatarURL:a}=x(_),[s,n]=c.useState(a),r=c.useRef(null),i=()=>{r.current.click()},o=async l=>{const d=new FileReader,u=l.target.files[0];if(t(u),!u)return;const h=await Ze(u);d.onload=y=>{const m=y.target.result;n(m)},d.readAsDataURL(h)};return e.jsxs(se,{children:[e.jsxs(ae,{children:[s&&e.jsx("img",{src:s,alt:"avatar"}),!s&&e.jsx(j,{id:"user",size:48})]}),e.jsxs(te,{children:[e.jsx(R,{size:"editProfile",type:"button",onClick:i}),e.jsx(ne,{onChange:o,ref:r,type:"file",accept:"image/jpeg,image/png"})]})]})},ss=({register:t,current:a,errors:s})=>{const[n,r]=c.useState(!1),i=()=>{r(!n)};return e.jsxs(oe,{children:[e.jsxs(C,{children:[e.jsx(M,{children:e.jsx(E,{...t("name"),defaultValue:a.name,className:s.name?"has-error":"",$hasError:!!s.name})}),s.name&&e.jsx(I,{children:s.name.message})]}),e.jsxs(C,{children:[e.jsx(M,{children:e.jsx(E,{...t("email"),defaultValue:a.email,className:s.email?"has-error":"",$hasError:!!s.email})}),s.email&&e.jsx(I,{children:s.email.message})]}),e.jsxs(C,{children:[e.jsxs(M,{children:[e.jsx(E,{...t("password"),placeholder:"password",className:s.password?"has-error":"",type:n?"text":"password",$hasError:!!s.password}),e.jsx(ie,{onClick:i,type:"button",className:n?"active":"",children:n?e.jsx(j,{id:"eye",className:"icon",size:"18"}):e.jsx(j,{id:"eye-off",className:"icon",size:"18"})})]}),s.password&&e.jsx(I,{children:s.password.message})]})]})},as=({handleCloseModal:t})=>{const[a,s]=c.useState(null),n=x(_),r=x(D),i=w(),{register:o,handleSubmit:l,formState:{errors:d,dirtyFields:u}}=F({mode:"onChange",resolver:$(le),shouldUnregister:!0}),h=y=>{const{name:m,email:g,password:b}=y;if(!m&&!g&&!b&&!a)return;const p=new FormData;n.name!==m&&m&&p.append("name",m),n.email!==g&&g&&p.append("email",g),b&&p.append("password",b),a&&p.append("avatar",a),i(ue(p)).unwrap().then(()=>{t()})};return e.jsxs(ce,{onSubmit:l(h),children:[e.jsx(de,{children:"Edit  profile"}),e.jsx(es,{setAvatar:s}),e.jsx(ss,{register:o,errors:d,current:n,dirtyFields:u}),e.jsx(R,{title:"Send",icon:!1,isLoading:r})]})},ts=()=>{const{name:t,avatarURL:a}=x(_),[s,n]=f(),r=c.useRef(),i=l=>{l.target.closest("button")===r.current&&n()},o=()=>{n(!1)};return e.jsxs(he,{type:"button",onClick:i,ref:r,children:[e.jsx(pe,{children:t}),e.jsxs(me,{children:[a&&e.jsx("img",{src:a,alt:"avatar"}),!a&&e.jsx(j,{id:"user",size:32})]}),s&&e.jsx(S,{toggleModal:o,children:e.jsx(as,{handleCloseModal:o})})]})},ns=({toggleSidebar:t})=>{const a=x(xe),s=x(P),[,n]=je("activeBoardId",s==null?void 0:s._id);return e.jsx(ge,{children:a.map(r=>e.jsx(ls,{icon:r.icon,title:r.title,id:r._id,setActiveBoardId:n,toggleSidebar:t},r._id))})},rs=({toggleModal:t})=>{var d,u;const a=w(),s=x(D),{register:n,handleSubmit:r,formState:{errors:i,dirtyFields:o}}=F({mode:"onChange",resolver:$(ye)}),l=h=>{a(ke(h)).unwrap().then(()=>{t(),v.success("Your request has been successfully sent! Please, check your mail.")}).catch(()=>{v.error("An error occurred. Please try again later.")})};return e.jsxs(e.Fragment,{children:[e.jsxs(Se,{onSubmit:r(l),children:[e.jsx(fe,{children:"Need help"}),e.jsxs(N,{children:[e.jsx(ve,{type:"text",name:"email",placeholder:"Email address",...n("email"),$hasError:!!i.email}),((d=i.email)==null?void 0:d.message)&&o&&e.jsxs(z,{children:[i.email.message," "]})]}),e.jsxs(N,{className:"wrapperText",children:[e.jsx(be,{type:"text",name:"message",placeholder:"Comment",...n("message"),$hasError:!!i.message}),((u=i.message)==null?void 0:u.message)&&o&&e.jsx(z,{children:i.message.message})]}),e.jsx(we,{type:"submit",children:"Send"})]}),s&&e.jsx(B,{})]})},H=({className:t,toggleSidebar:a})=>{const[s,n]=f(),[r,i]=f(),[o,l]=f(),d=w(),u=O(),h=()=>{d(Pe()).unwrap().then(()=>{u("/"),n(),v.warning("In order to use the application you must log in.")}).catch(()=>{v.error("Sorry, something went wrong. Please try again later.")})};return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{className:t,children:[e.jsxs(Me,{to:"/",children:[e.jsx(k,{id:"logo",size:32,className:"logo"}),e.jsx(Ee,{children:"Task Pro"})]}),e.jsx(Ie,{children:"My boards"}),e.jsxs(Le,{children:[e.jsx(_e,{children:"Create a new board"}),e.jsx(Be,{type:"button",onClick:n,children:e.jsx(k,{id:"plus",size:20,className:"plus"})})]}),e.jsx(Ne,{children:e.jsx(ns,{toggleSidebar:a})}),e.jsxs(ze,{children:[e.jsxs(Te,{children:["If you need help with ",e.jsx("span",{children:"TaskPro"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(De,{onClick:i,children:[e.jsx(k,{id:"help-circle",size:20,className:"help-circle"}),"Need help?"]})]}),e.jsx(Fe,{children:e.jsxs($e,{type:"button",onClick:l,children:[e.jsx(k,{id:"login",size:32,className:"login"}),"Log out"]})})]}),s&&e.jsx(S,{toggleModal:n,children:e.jsx(U,{handleCloseModal:n})}),r&&e.jsx(S,{toggleModal:i,children:e.jsx(rs,{toggleModal:i})}),o&&e.jsx(S,{toggleModal:l,children:e.jsx(W,{closeModal:l,approveModal:h,logout:!0,action:"log out"})})]})},os=({handleBackdropClick:t,toggleSidebar:a})=>(c.useEffect(()=>{const s=n=>{const{code:r}=n;r==="Escape"&&a()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[a]),e.jsx(Oe,{onClick:t,children:e.jsx(H,{className:"sidebarHeader",toggleSidebar:a})})),is=()=>{const[t,a]=c.useState(!1),[s,n]=c.useState(!1),r=c.useCallback(()=>{a(!t)},[t]),i=o=>{o.currentTarget===o.target&&r()};return e.jsxs(Ae,{children:[t&&e.jsx(os,{handleBackdropClick:i,toggleSidebar:r}),e.jsx(Re,{onClick:r,children:e.jsx(j,{id:"menu"})}),e.jsx(Xe,{setIsLoading:n}),e.jsx(ts,{}),s&&e.jsx(B,{})]})},ls=({id:t,title:a,icon:s,toggleSidebar:n=!1})=>{const[r,i]=f(),[o,l]=f(),d=O(),{boardName:u}=Ue(),h=w(),m=x(P)._id===t,g=p=>{p!==u&&(d(`/home/${p}`),h(Je(t)),n&&n(),localStorage.setItem("activeBoardId",JSON.stringify(t)))},b=()=>{h(Ge(t)).unwrap().then(()=>{localStorage.removeItem("activeBoardId"),v.success(`The board "${u}" was deleted.`),d("/home"),n&&n()}).catch(p=>{v.error(p.message)})};return e.jsxs(e.Fragment,{children:[e.jsxs(We,{onClick:()=>g(a),$isActive:m,children:[e.jsxs(He,{children:[e.jsx(L,{id:s,size:18,className:"project"}),e.jsx(Ve,{children:a})]}),m&&e.jsxs(qe,{children:[e.jsx(T,{type:"button",onClick:i,"aria-label":"edit",children:e.jsx(L,{id:"pencil",size:16,className:"pencil"})}),e.jsx(T,{type:"button",onClick:l,"aria-label":"delete",children:e.jsx(L,{id:"trash",size:16,className:"trash"})})]})]}),r&&e.jsx(S,{toggleModal:i,children:e.jsx(U,{boardId:t,handleCloseModal:i})}),o&&e.jsx(S,{toggleModal:l,children:e.jsx(W,{closeModal:l,approveModal:b,action:`remove ${a} board`})})]})},cs=A.div`
  display: flex;
  flex-direction: row;
`,ds=A.div`
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
`,xs=()=>e.jsxs(cs,{children:[e.jsx(H,{className:"sidebarHome"}),e.jsxs(ds,{children:[e.jsx(is,{}),e.jsx(c.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Ke,{})})]})]});export{xs as default};
