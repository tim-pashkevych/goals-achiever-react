import{t as V,b as S,r as d,j as e,S as q,f as G,g as J,h as K,i as Y,k as Q,m as X,I as j,n as m,s as Z,o as ee,p as se,q as ae,v as te,w as ne,x as $,y as M,z as T,A as F,B as N,C as re,D as oe,E as ie,F as le,G as ce,H as de,J as W,K as ue,M as he,O as pe,P as D,Q as xe,R as g,T as me,U as je,V as ge,W as P,X as Se,Y as R,Z as fe,_ as be,$ as ve,a0 as ke,a1 as we,a2 as ye,a3 as k,a4 as Ce,a5 as Ie,a6 as Le,a7 as Be,a8 as Ee,a9 as _e,aa as ze,ab as $e,ac as Me,ad as Te,ae as Fe,af as b,ag as L,ah as Ne,ai as De,aj as Pe,ak as Re,al as Oe,am as We,an as y,ao as C,ap as Ae,aq as He,ar as Ue,as as Ve,at as qe,au as Ge,av as Je,aw as Ke,ax as Ye,ay as Qe,az as Xe,aA as Ze,aB as A,e as es,aC as ss,aD as as,aE as I,aF as ts,aG as ns,aH as O,aI as rs,u as B,aJ as os}from"./index-2b95615b.js";import{u as v}from"./useModal-111df98c.js";import{u as E,o as _}from"./yup-2af64c2d.js";import{b as is,I as ls}from"./Image-27fbf21f.js";import{B as z}from"./Button-bf45e7f7.js";const cs=Object.keys(V),ds=({setIsOpenPopUp:t,boxRef:a,setIsLoading:n})=>{const r=S();d.useEffect(()=>{const o=i=>{i.target.closest("button")!==a.current&&t(!1)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[a,t]),d.useEffect(()=>{const o=i=>{i.code==="Escape"&&t(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[t]);const s=o=>{n(!0),r(K({theme:o})).unwrap().finally(()=>{t(!1),n(!1)})};return e.jsx(q,{children:cs.map(o=>e.jsx(G,{children:e.jsxs(J,{onClick:()=>s(o),children:[" ",o]})},o))})},us=({setIsLoading:t})=>{const[a,n]=d.useState(!1),r=d.useRef(),s=o=>{o.target.closest("ul")||n(!a)};return e.jsxs(Y,{children:[e.jsxs(Q,{onClick:s,ref:r,children:[e.jsx(X,{children:"Theme"}),!a&&e.jsx(j,{id:"chevron-down",size:16}),a&&e.jsx(j,{id:"chevron-up",size:16})]}),a&&e.jsx(ds,{boxRef:r,setIsOpenPopUp:n,setIsLoading:t})]})},hs=["project","star","loading","puzzle-piece","container","lightning","colors","hexagon"],H=({boardId:t,handleCloseModal:a})=>{const n=m(Z),r=S(),s=m(l=>ee(l,t)),{register:o,handleSubmit:i,formState:{errors:u}}=E({resolver:_(oe),defaultValues:{title:s==null?void 0:s.title,icon:s==null?void 0:s.icon,backgroundImage:s==null?void 0:s.backgroundImage},mode:"onChange"}),c=is.filter(l=>l.themes.includes(n)),h={width:28,height:28},x=l=>{t?r(ie({newBoardBody:l,id:t})).unwrap().then(()=>{a()}):r(le(l)).unwrap().then(()=>{a()})};return e.jsx(se,{children:e.jsxs(ae,{onSubmit:i(x),children:[e.jsx(te,{children:s?"Edit board":"New board"}),e.jsx(ne,{type:"text",autoFocus:!0,...o("title")}),e.jsxs($,{children:[e.jsx(M,{children:"Icons"}),e.jsx(T,{$gap:"3px",children:hs.map(l=>e.jsxs(F,{children:[e.jsx(N,{type:"radio",...o("icon"),value:l}),e.jsx(j,{id:l,size:24,stroke:"rgba(255, 255, 255, 0.5)",fill:"rgba(0, 0, 0, 0)"})]},l))})]}),e.jsxs($,{children:[e.jsx(M,{children:"Background"}),e.jsx(T,{$width:"252px",$gap:"4px",children:c.map(l=>e.jsxs(F,{children:[e.jsx(N,{type:"radio",...o("backgroundImage"),value:l.key}),e.jsx(ls,{desktop:h,tablet:h,mobile:h,type:"image/png",pathKey:l.key,alt:l.alt,imageCategory:"boardIcons"})]},l.key))})]}),e.jsx(re,{children:e.jsx(z,{title:s?"Edit":"Create",icon:!0,size:"large",style:{width:3340}})})]})})},ps=()=>{const t=m(ce);return e.jsx(de,{children:t.map(a=>e.jsx(ks,{icon:a.icon,title:a.title,id:a._id},a._id))})},xs=({toggleModal:t})=>{const a=S(),n=W(),[r,s]=d.useState(!1),o=()=>{s(!0),a(xe()).unwrap().then(()=>{n("/"),t(),g.warning("In order to use the application you must log in")}).catch(()=>{g.error("Oops... Something went wrong")}).finally(()=>{s(!1)})};return e.jsxs(ue,{children:[e.jsx(he,{children:"Are you sure you want to log out?"}),e.jsxs(pe,{children:[e.jsx(D,{type:"button",onClick:o,disabled:r,children:"Log out"}),e.jsx(D,{type:"button",onClick:()=>t(),children:"Cancel"})]})]})},ms=({toggleModal:t})=>{var u,c;const{register:a,handleSubmit:n,formState:{errors:r,dirtyFields:s}}=E({mode:"onChange",resolver:_(ve)}),o=S(),i=h=>{o(ke(h)).unwrap().then(()=>{t(),g.success("Your request has been successfully sent! Please, check your mail.")}).catch(()=>{g.error("An error occurred. Please try again later.")})};return e.jsx(me,{children:e.jsxs(je,{onSubmit:n(i),children:[e.jsx(ge,{children:"Need help"}),e.jsxs(P,{children:[e.jsx(Se,{type:"text",name:"email",placeholder:"Email address",...a("email"),$hasError:!!r.email}),((u=r.email)==null?void 0:u.message)&&s&&e.jsx(R,{children:r.email.message})]}),e.jsxs(P,{className:"wrapperText",children:[e.jsx(fe,{type:"text",name:"message",placeholder:"Comment",...a("message"),$hasError:!!r.message}),((c=r.message)==null?void 0:c.message)&&s&&e.jsx(R,{children:r.message.message})]}),e.jsx(be,{type:"submit",children:"Send"})]})})},U=({className:t})=>{const[a,n]=v(),[r,s]=v(),[o,i]=v();return e.jsxs(e.Fragment,{children:[e.jsxs(we,{className:t,children:[e.jsxs(ye,{to:"/",children:[e.jsx(k,{id:"logo",size:32,className:"logo"}),e.jsx(Ce,{children:"Task Pro"})]}),e.jsx(Ie,{children:"My boards"}),e.jsxs(Le,{children:[e.jsx(Be,{children:"Create a new board"}),e.jsx(Ee,{type:"button",onClick:n,children:e.jsx(k,{id:"plus",size:20,className:"plus"})})]}),e.jsx(_e,{children:e.jsx(ps,{})}),e.jsxs(ze,{children:[e.jsxs($e,{children:["If you need help with ",e.jsx("span",{children:"TaskPro"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(Me,{onClick:s,children:[e.jsx(k,{id:"help-circle",size:20,className:"help-circle"}),"Need help?"]})]}),e.jsx(Te,{children:e.jsxs(Fe,{type:"button",onClick:i,children:[e.jsx(k,{id:"login",size:32,className:"login"}),"Log out"]})})]}),a&&e.jsx(b,{toggleModal:n,children:e.jsx(H,{handleCloseModal:n})}),r&&e.jsx(b,{toggleModal:s,children:e.jsx(ms,{toggleModal:s})}),o&&e.jsx(b,{toggleModal:i,children:e.jsx(xs,{toggleModal:i})})]})},js=t=>new Promise(a=>{Oe.imageFileResizer(t,150,150,"JPEG",100,0,n=>{a(n)},"file")}),gs=({setAvatar:t})=>{const{avatarURL:a}=m(L),[n,r]=d.useState(a),s=d.useRef(null),o=()=>{s.current.click()},i=async u=>{const c=new FileReader,h=u.target.files[0];if(t(h),!h)return;const x=await js(h);c.onload=l=>{const p=l.target.result;r(p)},c.readAsDataURL(x)};return e.jsxs(Ne,{children:[e.jsxs(De,{children:[n&&e.jsx("img",{src:n,alt:"avatar"}),!n&&e.jsx(j,{id:"user",size:48})]}),e.jsxs(Pe,{children:[e.jsx(z,{size:"editProfile",type:"button",onClick:o}),e.jsx(Re,{onChange:i,ref:s,type:"file",accept:"image/jpeg,image/png"})]})]})},Ss=({register:t,current:a})=>{const[n,r]=d.useState(!1),s=()=>{r(!n)};return e.jsxs(We,{children:[e.jsx(y,{children:e.jsx(C,{...t("name"),defaultValue:a.name})}),e.jsx(y,{children:e.jsx(C,{...t("email"),defaultValue:a.email})}),e.jsxs(y,{children:[e.jsx(C,{...t("password"),placeholder:"password",type:n?"text":"password"}),e.jsx(Ae,{onClick:s,type:"button",className:n?"active":"",children:e.jsx(j,{id:"eye",size:18})})]})]})},fs=({handleCloseModal:t})=>{const[a,n]=d.useState(null),r=m(L),s=m(He),o=S(),{register:i,handleSubmit:u,formState:{errors:c}}=E({mode:"onChange",resolver:_(Ue)}),h=x=>{const{name:l,email:p,password:w}=x;if(!l&&!p&&!w&&!a)return;const f=new FormData;r.name!==l&&l&&f.append("name",l),r.email!==p&&p&&f.append("email",p),w&&f.append("password",w),a&&f.append("avatar",a),o(Ge(f)).unwrap().then(()=>{t()})};return e.jsxs(Ve,{onSubmit:u(h),children:[e.jsx(qe,{children:"Edit profile"}),e.jsx(gs,{setAvatar:n}),e.jsx(Ss,{register:i,errors:c,current:r}),e.jsx(z,{title:"Send",icon:!1,isLoading:s})]})},bs=()=>{const{name:t,avatarURL:a}=m(L),[n,r]=v(),s=d.useRef(),o=u=>{u.target.closest("button")===s.current&&r()},i=()=>{r(!1)};return e.jsxs(Je,{onClick:o,ref:s,children:[e.jsx(Ke,{children:t}),e.jsxs(Ye,{children:[e.jsx("img",{src:a,alt:"avatar"}),!1]}),n&&e.jsx(b,{toggleModal:i,children:e.jsx(fs,{handleCloseModal:i})})]})},vs=()=>{const[t,a]=d.useState(!1),[n,r]=d.useState(!1),s=d.useCallback(()=>{a(!t)},[t]),o=i=>{i.currentTarget===i.target&&s()};return d.useEffect(()=>{const i=u=>{const{code:c}=u;c==="Escape"&&s()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[s]),e.jsxs(Qe,{children:[t&&e.jsx(Xe,{onClick:o,children:e.jsx(U,{className:"sidebarHeader"})}),e.jsx(Ze,{onClick:s,children:e.jsx(j,{id:"menu"})}),e.jsx(us,{setIsLoading:r}),e.jsx(bs,{}),n&&e.jsx(A,{})]})},ks=({id:t,title:a,icon:n})=>{const[r,s]=v(),o=S(),i=W(),{boardName:u}=es(),c=u===a,h=l=>{i(`/home/${l}`)},x=l=>{o(rs(l)).unwrap().then(()=>{g.success(`The board ${u} was deleted`)}).catch(p=>{g.error(p.message)})};return e.jsxs(e.Fragment,{children:[e.jsxs(ss,{onClick:()=>h(a),$isActive:c,children:[e.jsxs(as,{children:[e.jsx(I,{id:n,size:18,className:"project"}),e.jsx(ts,{children:a})]}),c&&e.jsxs(ns,{children:[e.jsx(O,{type:"button",onClick:s,"aria-label":"edit",children:e.jsx(I,{id:"pencil",size:16,className:"pencil"})}),e.jsx(O,{type:"button",onClick:()=>x(t),"aria-label":"delete",children:e.jsx(I,{id:"trash",size:16,className:"trash"})})]})]}),r&&e.jsx(b,{toggleModal:s,children:e.jsx(H,{boardId:t,handleCloseModal:s})})]})},ws=B.div`
  display: flex;
  flex-direction: row;
`,ys=B.div`
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;

  @media screen and (min-width: 375px) {
    width: 375px;
  }
  @media screen and (min-width: 768px) {
    width: 768px;
  }
  @media screen and (min-width: 1440px) {
    width: 100%;
  }
`;B.div`
  @media screen and (max-width: 1440px) {
    display: none;
  }
`;const _s=()=>e.jsxs(ws,{children:[e.jsx(U,{className:"sidebarHome"}),e.jsxs(ys,{children:[e.jsx(vs,{}),e.jsx(d.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(os,{})})]})]});export{_s as default};
