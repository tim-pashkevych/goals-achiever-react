import{t as Z,d as k,r as d,j as e,S as ee,k as se,m as ae,n as te,p as ne,q as re,v as ie,I as g,a as x,w as _,x as oe,y as le,z as ce,A as de,R as ue,C as he,D as I,E as B,F as L,G as E,H as pe,s as q,f as $,o as N,J as me,K as xe,M as je,O as ge,P as Se,Q as fe,T as ve,U as v,e as z,V as ye,W as we,X as ke,Y as be,Z as Ce,_ as Ie,$ as P,a0 as O,a1 as A,a2 as R,a3 as W,a4 as Be,a5 as Le,a6 as Ee,a7 as Me,a8 as _e,a9 as G,aa as $e,ab as Ne,ac as ze,ad as Te,ae as Fe,af as U,g as T,ag as De,B as w,ah as Pe,ai as Oe,aj as H,ak as Ae,al as V,am as Re,an as We,ao as Ue,ap as He,aq as Ve,ar as Je,as as C,at as Ke,au as qe,av as Ge,aw as Ye,ax as Qe,ay as Xe,az as Ze,aA as es,aB as ss,aC as as,aD as ts,aE as ns,aF as rs,aG as is,i as os,aH as ls,aI as cs,aJ as M,aK as ds,aL as us,aM as J,aN as hs,aO as ps,u as F,aP as ms}from"./index-36d92f7d.js";import{u as y,C as xs}from"./ConfirmationPopup-e2b07c00.js";import{B as D}from"./Button-aad6292a.js";import{b as js,I as gs}from"./Image-fd8990e1.js";import"./index-0e05dea9.js";const Ss=Object.keys(Z),fs=({setIsOpenPopUp:n,boxRef:r,setIsLoading:s})=>{const a=k();d.useEffect(()=>{const t=l=>{l.target.closest("button")!==r.current&&n(!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[r,n]),d.useEffect(()=>{const t=l=>{l.code==="Escape"&&n(!1)};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[n]);const i=t=>{s(!0),a(te({theme:t})).unwrap().finally(()=>{n(!1),s(!1)})};return e.jsx(ee,{children:Ss.map(t=>e.jsx(se,{children:e.jsxs(ae,{onClick:()=>i(t),children:[" ",t]})},t))})},vs=({setIsLoading:n})=>{const[r,s]=d.useState(!1),a=d.useRef(),i=t=>{t.target.closest("ul")||s(!r)};return e.jsxs(ne,{children:[e.jsxs(re,{onClick:i,ref:a,children:[e.jsx(ie,{children:"Theme"}),!r&&e.jsx(g,{id:"chevron-down",size:16}),r&&e.jsx(g,{id:"chevron-up",size:16})]}),r&&e.jsx(fs,{boxRef:a,setIsOpenPopUp:s,setIsLoading:n})]})},ys=n=>new Promise(r=>{ue.imageFileResizer(n,150,150,"JPEG",100,0,s=>{r(s)},"file")}),ws=({setAvatar:n})=>{const{avatarURL:r}=x(_),[s,a]=d.useState(r),i=d.useRef(null),t=()=>{i.current.click()},l=async c=>{const h=new FileReader,u=c.target.files[0];if(n(u),!u)return;const m=await ys(u);h.onload=j=>{const p=j.target.result;a(p)},h.readAsDataURL(m)};return e.jsxs(oe,{children:[e.jsxs(le,{children:[s&&e.jsx("img",{src:s,alt:"avatar"}),!s&&e.jsx(g,{id:"user",size:48})]}),e.jsxs(ce,{children:[e.jsx(D,{size:"editProfile",type:"button",onClick:t}),e.jsx(de,{onChange:l,ref:i,type:"file",accept:"image/jpeg,image/png"})]})]})},ks=({register:n,current:r,errors:s})=>{const[a,i]=d.useState(!1),t=()=>{i(!a)};return e.jsxs(he,{children:[e.jsxs(I,{children:[e.jsx(B,{children:e.jsx(L,{...n("name"),defaultValue:r.name,className:s.name?"has-error":"",$hasError:!!s.name})}),s.name&&e.jsx(E,{children:s.name.message})]}),e.jsxs(I,{children:[e.jsx(B,{children:e.jsx(L,{...n("email"),defaultValue:r.email,className:s.email?"has-error":"",$hasError:!!s.email})}),s.email&&e.jsx(E,{children:s.email.message})]}),e.jsxs(I,{children:[e.jsxs(B,{children:[e.jsx(L,{...n("password"),placeholder:"password",className:s.password?"has-error":"",type:a?"text":"password",$hasError:!!s.password}),e.jsx(pe,{onClick:t,type:"button",className:a?"active":"",children:a?e.jsx(g,{id:"eye",className:"icon",size:"18"}):e.jsx(g,{id:"eye-off",className:"icon",size:"18"})})]}),s.password&&e.jsx(E,{children:s.password.message})]})]})},bs=({handleCloseModal:n})=>{const[r,s]=d.useState(null),a=x(_),i=x(q),t=k(),{register:l,handleSubmit:c,formState:{errors:h,dirtyFields:u}}=$({mode:"onChange",resolver:N(me),shouldUnregister:!0}),m=j=>{const{name:p,email:o,password:f}=j;if(!p&&!o&&!f&&!r)return;const S=new FormData;a.name!==p&&p&&S.append("name",p),a.email!==o&&o&&S.append("email",o),f&&S.append("password",f),r&&S.append("avatar",r),t(ge(S)).unwrap().then(()=>{n()})};return e.jsxs(xe,{onSubmit:c(m),children:[e.jsx(je,{children:"Edit profile"}),e.jsx(ws,{setAvatar:s}),e.jsx(ks,{register:l,errors:h,current:a,dirtyFields:u}),e.jsx(D,{title:"Send",icon:!1,isLoading:i})]})},Cs=()=>{const{name:n,avatarURL:r}=x(_),[s,a]=y(),i=d.useRef(),t=c=>{c.target.closest("button")===i.current&&a()},l=()=>{a(!1)};return e.jsxs(Se,{onClick:t,ref:i,children:[e.jsx(fe,{children:n}),e.jsxs(ve,{children:[r&&e.jsx("img",{src:r,alt:"avatar"}),!r&&e.jsx(g,{id:"user",size:32})]}),s&&e.jsx(v,{toggleModal:l,children:e.jsx(bs,{handleCloseModal:l})})]})},K=["project","star","loading","puzzle-piece","container","lightning","colors","hexagon"],Y=({boardId:n,handleCloseModal:r})=>{var p;const s=z(),a=x(ye),i=k(),t=x(o=>we(o,n)),l=js.filter(o=>o.themes.includes(a)),{register:c,handleSubmit:h,formState:{errors:u}}=$({resolver:N(Le),defaultValues:{title:t==null?void 0:t.title,icon:(t==null?void 0:t.icon)||K[0],backgroundImage:(t==null?void 0:t.backgroundImage)||l[0].key},mode:"onChange"}),m={width:28,height:28},j=o=>{n?i(Ee({newBoardBody:o,id:n})).unwrap().then(()=>{s(`/home/${o.title}`),r()}):i(Me(o)).unwrap().then(()=>{s(`/home/${o.title}`),r()})};return e.jsx(ke,{children:e.jsxs(be,{onSubmit:h(j),children:[e.jsx(Ce,{children:t?"Edit board":"New board"}),e.jsx(Ie,{type:"text",autoFocus:!0,...c("title"),placeholder:"Title"}),((p=u.title)==null?void 0:p.message)&&e.jsx("div",{children:u.title.message}),e.jsxs(P,{children:[e.jsx(O,{children:"Icons"}),e.jsx(A,{$gap:"11px",children:K.map(o=>e.jsxs(R,{children:[e.jsx(W,{type:"radio",...c("icon"),value:o}),e.jsx(g,{id:o,size:15})]},o))})]}),e.jsxs(P,{children:[e.jsx(O,{children:"Background"}),e.jsx(A,{$width:"252px",$gap:"4px",children:l.map(o=>e.jsxs(R,{children:[e.jsx(W,{type:"radio",...c("backgroundImage"),value:o.key}),e.jsx(gs,{desktop:m,tablet:m,mobile:m,type:"image/png",pathKey:o.key,alt:o.alt,imageCategory:"boardIcons"})]},o.key))})]}),e.jsx(Be,{children:e.jsx(D,{title:t?"Edit":"Create",icon:!0,size:"large",style:{width:3340}})})]})})},Is=({toggleSidebar:n})=>{const r=x(_e),s=x(G),[,a]=$e("activeBoardId",s==null?void 0:s._id);return e.jsx(Ne,{children:r.map(i=>e.jsx(_s,{icon:i.icon,title:i.title,id:i._id,setActiveBoardId:a,toggleSidebar:n},i._id))})},Bs=({toggleModal:n})=>{const r=k(),s=z(),a=x(q),i=()=>{r(De()).unwrap().then(()=>{s("/"),n(),w.warning("In order to use the application you must log in.")}).catch(()=>{w.error("Sorry, something went wrong. Please try again later.")})};return e.jsxs(ze,{children:[e.jsx(Te,{children:"Are you sure you want to log out?"}),e.jsxs(Fe,{children:[e.jsx(U,{type:"button",onClick:i,disabled:a,children:"Log out"}),e.jsx(U,{type:"button",onClick:()=>n(),children:"Cancel"})]}),a&&e.jsx(T,{})]})},Ls=({toggleModal:n})=>{var c,h;const{register:r,handleSubmit:s,formState:{errors:a,dirtyFields:i}}=$({mode:"onChange",resolver:N(Ue)}),t=k(),l=u=>{t(He(u)).unwrap().then(()=>{n(),w.success("Your request has been successfully sent! Please, check your mail.")}).catch(()=>{w.error("An error occurred. Please try again later.")})};return e.jsx(e.Fragment,{children:e.jsxs(Pe,{onSubmit:s(l),children:[e.jsx(Oe,{children:"Need help"}),e.jsxs(H,{children:[e.jsx(Ae,{type:"text",name:"email",placeholder:"Email address",...r("email"),$hasError:!!a.email}),((c=a.email)==null?void 0:c.message)&&i&&e.jsxs(V,{children:[a.email.message," "]})]}),e.jsxs(H,{className:"wrapperText",children:[e.jsx(Re,{type:"text",name:"message",placeholder:"Comment",...r("message"),$hasError:!!a.message}),((h=a.message)==null?void 0:h.message)&&i&&e.jsx(V,{children:a.message.message})]}),e.jsx(We,{type:"submit",children:"Send"})]})})},Q=({className:n,toggleSidebar:r})=>{const[s,a]=y(),[i,t]=y(),[l,c]=y();return e.jsxs(e.Fragment,{children:[e.jsxs(Ve,{className:n,children:[e.jsxs(Je,{to:"/",children:[e.jsx(C,{id:"logo",size:32,className:"logo"}),e.jsx(Ke,{children:"Task Pro"})]}),e.jsx(qe,{children:"My boards"}),e.jsxs(Ge,{children:[e.jsx(Ye,{children:"Create a new board"}),e.jsx(Qe,{type:"button",onClick:a,children:e.jsx(C,{id:"plus",size:20,className:"plus"})})]}),e.jsx(Xe,{children:e.jsx(Is,{toggleSidebar:r})}),e.jsxs(Ze,{children:[e.jsxs(es,{children:["If you need help with ",e.jsx("span",{children:"TaskPro"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(ss,{onClick:t,children:[e.jsx(C,{id:"help-circle",size:20,className:"help-circle"}),"Need help?"]})]}),e.jsx(as,{children:e.jsxs(ts,{type:"button",onClick:c,children:[e.jsx(C,{id:"login",size:32,className:"login"}),"Log out"]})})]}),s&&e.jsx(v,{toggleModal:a,children:e.jsx(Y,{handleCloseModal:a})}),i&&e.jsx(v,{toggleModal:t,children:e.jsx(Ls,{toggleModal:t})}),l&&e.jsx(v,{toggleModal:c,children:e.jsx(Bs,{toggleModal:c})})]})},Es=({handleBackdropClick:n,toggleSidebar:r})=>(d.useEffect(()=>{const s=a=>{const{code:i}=a;i==="Escape"&&r()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[r]),e.jsx(ns,{onClick:n,children:e.jsx(Q,{className:"sidebarHeader",toggleSidebar:r})})),Ms=()=>{const[n,r]=d.useState(!1),[s,a]=d.useState(!1),i=d.useCallback(()=>{r(!n)},[n]),t=l=>{l.currentTarget===l.target&&i()};return e.jsxs(rs,{children:[n&&e.jsx(Es,{handleBackdropClick:t,toggleSidebar:i}),e.jsx(is,{onClick:i,children:e.jsx(g,{id:"menu"})}),e.jsx(vs,{setIsLoading:a}),e.jsx(Cs,{}),s&&e.jsx(T,{})]})},_s=({id:n,title:r,icon:s,toggleSidebar:a=!1})=>{const[i,t]=y(),[l,c]=y(),[h,u]=d.useState(!1),m=k(),j=z(),{boardName:p}=os(),f=x(G)._id===n,S=b=>{b!==p&&(j(`/home/${b}`),m(hs(n)),a&&a(),localStorage.setItem("activeBoardId",JSON.stringify(n)))},X=()=>{u(!0),m(ps(n)).unwrap().then(()=>{localStorage.removeItem("activeBoardId"),w.success(`The board "${p}" was deleted.`),j("/home"),a&&a()}).catch(b=>{w.error(b.message)}).finally(()=>{u(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs(ls,{onClick:()=>S(r),$isActive:f,children:[e.jsxs(cs,{children:[e.jsx(M,{id:s,size:18,className:"project"}),e.jsx(ds,{children:r})]}),f&&e.jsxs(us,{children:[e.jsx(J,{type:"button",onClick:t,"aria-label":"edit",children:e.jsx(M,{id:"pencil",size:16,className:"pencil"})}),e.jsx(J,{type:"button",onClick:c,"aria-label":"delete",children:e.jsx(M,{id:"trash",size:16,className:"trash"})})]})]}),i&&e.jsx(v,{toggleModal:t,children:e.jsx(Y,{boardId:n,handleCloseModal:t})}),l&&e.jsx(v,{toggleModal:c,children:e.jsx(xs,{closeModal:c,approveModal:X,isLoading:h,action:`remove ${r} board`})})]})},$s=F.div`
  display: flex;
  flex-direction: row;
`,Ns=F.div`
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;

  @media screen and (min-width: 375px) {
    width: 375px;
  }
  @media screen and (min-width: 768px) {
    width: 768px;
  }
  @media screen and (min-width: 1440px) {
    width: 100%;
  }
`;F.div`
  @media screen and (max-width: 1440px) {
    display: none;
  }
`;const Os=()=>e.jsxs($s,{children:[e.jsx(Q,{className:"sidebarHome"}),e.jsxs(Ns,{children:[e.jsx(Ms,{}),e.jsx(d.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(ms,{})})]})]});export{Os as default};
