import{t as K,b,r as l,j as e,S as q,f as G,g as J,h as Y,i as Q,k as X,m as Z,I as f,n as x,s as ee,o as se,p as ae,q as te,v as ne,w as re,x as M,y as T,z as $,A as F,C as N,D as oe,E as ie,F as ce,G as le,H as de,J as O,K as ue,M as he,O as W,P as pe,Q as xe,R as me,T as D,U as je,B as S,V as ge,W as Se,X as fe,Y as P,Z as be,_ as R,$ as ve,a0 as ke,a1 as we,a2 as ye,a3 as Ce,a4 as Ie,a5 as w,a6 as Be,a7 as Le,a8 as Ee,a9 as _e,aa as ze,ab as Me,ac as Te,ad as $e,ae as Fe,af as Ne,ag as De,ah as v,ai as B,aj as Pe,ak as Re,al as Ae,am as Oe,an as We,ao as He,ap as y,aq as C,ar as Ue,as as Ve,at as Ke,au as qe,av as Ge,aw as Je,ax as Ye,ay as Qe,az as Xe,aA as Ze,aB as es,aC as ss,aD as H,e as as,aE as ts,aF as ns,aG as I,aH as rs,aI as os,aJ as A,aK as is,aL as cs,u as L,aM as ls}from"./index-5fec5e67.js";import{u as k}from"./useModal-4ee117d2.js";import{u as E,o as _,B as z}from"./yup-a701d889.js";import{b as ds,I as us}from"./Image-81028748.js";const hs=Object.keys(K),ps=({setIsOpenPopUp:s,boxRef:t,setIsLoading:r})=>{const n=b();l.useEffect(()=>{const o=i=>{i.target.closest("button")!==t.current&&s(!1)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[t,s]),l.useEffect(()=>{const o=i=>{i.code==="Escape"&&s(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[s]);const a=o=>{r(!0),n(Y({theme:o})).unwrap().finally(()=>{s(!1),r(!1)})};return e.jsx(q,{children:hs.map(o=>e.jsx(G,{children:e.jsxs(J,{onClick:()=>a(o),children:[" ",o]})},o))})},xs=({setIsLoading:s})=>{const[t,r]=l.useState(!1),n=l.useRef(),a=o=>{o.target.closest("ul")||r(!t)};return e.jsxs(Q,{children:[e.jsxs(X,{onClick:a,ref:n,children:[e.jsx(Z,{children:"Theme"}),!t&&e.jsx(f,{id:"chevron-down",size:16}),t&&e.jsx(f,{id:"chevron-up",size:16})]}),t&&e.jsx(ps,{boxRef:n,setIsOpenPopUp:r,setIsLoading:s})]})},ms=["project","star","loading","puzzle-piece","container","lightning","colors","hexagon"],U=({boardId:s,handleCloseModal:t})=>{const r=x(ee),n=b(),a=x(c=>se(c,s)),{register:o,handleSubmit:i,formState:{errors:u}}=E({resolver:_(ie),defaultValues:{title:a==null?void 0:a.title,icon:a==null?void 0:a.icon,backgroundImage:a==null?void 0:a.backgroundImage},mode:"onChange"}),d=ds.filter(c=>c.themes.includes(r)),h={width:28,height:28},m=c=>{s?n(ce({newBoardBody:c,id:s})).unwrap().then(()=>{t()}):n(le(c)).unwrap().then(()=>{t()})};return e.jsx(ae,{children:e.jsxs(te,{onSubmit:i(m),children:[e.jsx(ne,{children:a?"Edit board":"New board"}),e.jsx(re,{type:"text",autoFocus:!0,...o("title")}),e.jsxs(M,{children:[e.jsx(T,{children:"Icons"}),e.jsx($,{$gap:"3px",children:ms.map(c=>e.jsxs(F,{children:[e.jsx(N,{type:"radio",...o("icon"),value:c}),e.jsx(f,{id:c,size:24,stroke:"rgba(255, 255, 255, 0.5)",fill:"rgba(0, 0, 0, 0)"})]},c))})]}),e.jsxs(M,{children:[e.jsx(T,{children:"Background"}),e.jsx($,{$width:"252px",$gap:"4px",children:d.map(c=>e.jsxs(F,{children:[e.jsx(N,{type:"radio",...o("backgroundImage"),value:c.key}),e.jsx(us,{desktop:h,tablet:h,mobile:h,type:"image/png",pathKey:c.key,alt:c.alt,imageCategory:"boardIcons"})]},c.key))})]}),e.jsx(oe,{children:e.jsx(z,{title:a?"Edit":"Create",icon:!0,size:"large",style:{width:3340}})})]})})},js=()=>{const s=x(de),t=x(O),[,r]=ue("activeBoardId",t==null?void 0:t._id);return e.jsx(he,{children:s.map(n=>e.jsx(Cs,{icon:n.icon,title:n.title,id:n._id,setActiveBoardId:r},n._id))})},gs=({toggleModal:s})=>{const t=b(),r=W(),[n,a]=l.useState(!1),o=()=>{a(!0),t(je()).unwrap().then(()=>{r("/"),s(),S.warning("In order to use the application you must log in")}).catch(()=>{S.error("Oops... Something went wrong")}).finally(()=>{a(!1)})};return e.jsxs(pe,{children:[e.jsx(xe,{children:"Are you sure you want to log out?"}),e.jsxs(me,{children:[e.jsx(D,{type:"button",onClick:o,disabled:n,children:"Log out"}),e.jsx(D,{type:"button",onClick:()=>s(),children:"Cancel"})]})]})},Ss=({toggleModal:s})=>{var u,d;const{register:t,handleSubmit:r,formState:{errors:n,dirtyFields:a}}=E({mode:"onChange",resolver:_(we)}),o=b(),i=h=>{o(ye(h)).unwrap().then(()=>{s(),S.success("Your request has been successfully sent! Please, check your mail.")}).catch(()=>{S.error("An error occurred. Please try again later.")})};return e.jsx(ge,{children:e.jsxs(Se,{onSubmit:r(i),children:[e.jsx(fe,{children:"Need help"}),e.jsxs(P,{children:[e.jsx(be,{type:"text",name:"email",placeholder:"Email address",...t("email"),$hasError:!!n.email}),((u=n.email)==null?void 0:u.message)&&a&&e.jsx(R,{children:n.email.message})]}),e.jsxs(P,{className:"wrapperText",children:[e.jsx(ve,{type:"text",name:"message",placeholder:"Comment",...t("message"),$hasError:!!n.message}),((d=n.message)==null?void 0:d.message)&&a&&e.jsx(R,{children:n.message.message})]}),e.jsx(ke,{type:"submit",children:"Send"})]})})},V=({className:s})=>{const[t,r]=k(),[n,a]=k(),[o,i]=k();return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{className:s,children:[e.jsxs(Ie,{to:"/",children:[e.jsx(w,{id:"logo",size:32,className:"logo"}),e.jsx(Be,{children:"Task Pro"})]}),e.jsx(Le,{children:"My boards"}),e.jsxs(Ee,{children:[e.jsx(_e,{children:"Create a new board"}),e.jsx(ze,{type:"button",onClick:r,children:e.jsx(w,{id:"plus",size:20,className:"plus"})})]}),e.jsx(Me,{children:e.jsx(js,{})}),e.jsxs(Te,{children:[e.jsxs($e,{children:["If you need help with ",e.jsx("span",{children:"TaskPro"}),", check out our support resources or reach out to our customer support team."]}),e.jsxs(Fe,{onClick:a,children:[e.jsx(w,{id:"help-circle",size:20,className:"help-circle"}),"Need help?"]})]}),e.jsx(Ne,{children:e.jsxs(De,{type:"button",onClick:i,children:[e.jsx(w,{id:"login",size:32,className:"login"}),"Log out"]})})]}),t&&e.jsx(v,{toggleModal:r,children:e.jsx(U,{handleCloseModal:r})}),n&&e.jsx(v,{toggleModal:a,children:e.jsx(Ss,{toggleModal:a})}),o&&e.jsx(v,{toggleModal:i,children:e.jsx(gs,{toggleModal:i})})]})},fs=s=>new Promise(t=>{We.imageFileResizer(s,150,150,"JPEG",100,0,r=>{t(r)},"file")}),bs=({setAvatar:s})=>{const{avatarURL:t}=x(B),[r,n]=l.useState(t),a=l.useRef(null),o=()=>{a.current.click()},i=async u=>{const d=new FileReader,h=u.target.files[0];if(s(h),!h)return;const m=await fs(h);d.onload=c=>{const j=c.target.result;n(j)},d.readAsDataURL(m)};return e.jsxs(Pe,{children:[e.jsxs(Re,{children:[r&&e.jsx("img",{src:r,alt:"avatar"}),!r&&e.jsx(f,{id:"user",size:48})]}),e.jsxs(Ae,{children:[e.jsx(z,{size:"editProfile",type:"button",onClick:o}),e.jsx(Oe,{onChange:i,ref:a,type:"file",accept:"image/jpeg,image/png"})]})]})},vs=({register:s,current:t})=>{const[r,n]=l.useState(!1),a=()=>{n(!r)};return e.jsxs(He,{children:[e.jsx(y,{children:e.jsx(C,{...s("name"),defaultValue:t.name})}),e.jsx(y,{children:e.jsx(C,{...s("email"),defaultValue:t.email})}),e.jsxs(y,{children:[e.jsx(C,{...s("password"),placeholder:"password",type:r?"text":"password"}),e.jsx(Ue,{onClick:a,type:"button",className:r?"active":"",children:e.jsx(f,{id:"eye",size:18})})]})]})},ks=({handleCloseModal:s})=>{const[t,r]=l.useState(null),n=x(B),a=x(Ve),o=b(),{register:i,handleSubmit:u,formState:{errors:d}}=E({mode:"onChange",resolver:_(Ke)}),h=m=>{const{name:c,email:j,password:g}=m;if(!c&&!j&&!g&&!t)return;const p=new FormData;n.name!==c&&c&&p.append("name",c),n.email!==j&&j&&p.append("email",j),g&&p.append("password",g),t&&p.append("avatar",t),o(Je(p)).unwrap().then(()=>{s()})};return e.jsxs(qe,{onSubmit:u(h),children:[e.jsx(Ge,{children:"Edit profile"}),e.jsx(bs,{setAvatar:r}),e.jsx(vs,{register:i,errors:d,current:n}),e.jsx(z,{title:"Send",icon:!1,isLoading:a})]})},ws=()=>{const{name:s,avatarURL:t}=x(B),[r,n]=k(),a=l.useRef(),o=u=>{u.target.closest("button")===a.current&&n()},i=()=>{n(!1)};return e.jsxs(Ye,{onClick:o,ref:a,children:[e.jsx(Qe,{children:s}),e.jsxs(Xe,{children:[e.jsx("img",{src:t,alt:"avatar"}),!1]}),r&&e.jsx(v,{toggleModal:i,children:e.jsx(ks,{handleCloseModal:i})})]})},ys=()=>{const[s,t]=l.useState(!1),[r,n]=l.useState(!1),a=l.useCallback(()=>{t(!s)},[s]),o=i=>{i.currentTarget===i.target&&a()};return l.useEffect(()=>{const i=u=>{const{code:d}=u;d==="Escape"&&a()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[a]),e.jsxs(Ze,{children:[s&&e.jsx(es,{onClick:o,children:e.jsx(V,{className:"sidebarHeader"})}),e.jsx(ss,{onClick:a,children:e.jsx(f,{id:"menu"})}),e.jsx(xs,{setIsLoading:n}),e.jsx(ws,{}),r&&e.jsx(H,{})]})},Cs=({id:s,title:t,icon:r,setActiveBoardId:n})=>{const[a,o]=k(),i=b(),u=W(),{boardName:d}=as(),m=x(O)._id===s,c=g=>{i(is(s)).unwrap().then(()=>{n(s),u(`/home/${g}`)}).catch(p=>S.error(p.message))},j=g=>{i(cs(g)).unwrap().then(()=>{S.success(`The board "${d}" was deleted.`)}).catch(p=>{S.error(p.message)})};return e.jsxs(e.Fragment,{children:[e.jsxs(ts,{onClick:()=>c(t),$isActive:m,children:[e.jsxs(ns,{children:[e.jsx(I,{id:r,size:18,className:"project"}),e.jsx(rs,{children:t})]}),m&&e.jsxs(os,{children:[e.jsx(A,{type:"button",onClick:o,"aria-label":"edit",children:e.jsx(I,{id:"pencil",size:16,className:"pencil"})}),e.jsx(A,{type:"button",onClick:()=>j(s),"aria-label":"delete",children:e.jsx(I,{id:"trash",size:16,className:"trash"})})]})]}),a&&e.jsx(v,{toggleModal:o,children:e.jsx(U,{boardId:s,handleCloseModal:o})})]})},Is=L.div`
  display: flex;
  flex-direction: row;
`,Bs=L.div`
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;

  @media screen and (min-width: 375px) {
    width: 375px;
  }
  @media screen and (min-width: 768px) {
    width: 768px;
  }
  @media screen and (min-width: 1440px) {
    width: 100%;
  }
`;L.div`
  @media screen and (max-width: 1440px) {
    display: none;
  }
`;const Ms=()=>e.jsxs(Is,{children:[e.jsx(V,{className:"sidebarHome"}),e.jsxs(Bs,{children:[e.jsx(ys,{}),e.jsx(l.Suspense,{fallback:e.jsx(H,{}),children:e.jsx(ls,{})})]})]});export{Ms as default};
